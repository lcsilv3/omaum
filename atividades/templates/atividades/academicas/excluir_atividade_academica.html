{% extends 'base.html' %}
{% load static %}
{% block title %}Excluir Atividade Acadêmica{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>Excluir Atividade Acadêmica</h1>
    <div class="alert alert-danger">
        <p>Tem certeza que deseja excluir a atividade <strong>{{ atividade.nome }}</strong>?</p>
        <p><strong>Curso:</strong> {{ atividade.curso }}</p>
        <p><strong>Turmas:</strong>
            {% for turma in atividade.turmas.all %}
                {{ turma.nome }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </p>
        {% if dependencias %}
            <hr>
            <h5>Dependências encontradas:</h5>
            <ul>
                {% if dependencias.presencas %}
                    <li><strong>Presenças:</strong> {{ dependencias.presencas|length }}</li>
                {% endif %}
                {% if dependencias.observacoes %}
                    <li><strong>Observações de Presença:</strong> {{ dependencias.observacoes|length }}</li>
                {% endif %}
            </ul>
            {% if dependencias.presencas or dependencias.observacoes %}
                <div class="alert alert-warning mt-2">
                    Não é possível excluir a atividade pois existem registros vinculados. Remova as dependências antes de tentar novamente.
                </div>
            {% endif %}
        {% endif %}
    </div>
    <form method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger" {% if dependencias.presencas or dependencias.observacoes %}disabled{% endif %}>Confirmar Exclusão</button>
        <a href="{% url 'atividades:detalhar_atividade_academica' atividade.pk %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
