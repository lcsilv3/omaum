<!-- filepath: presencas/templates/presencas/registrar_presenca_dados_basicos.html -->
{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block content %}
<div class="container mt-4">
    <h2>{% trans "Registrar Presença - Dados Básicos" %}</h2>
    <form id="form-dados-basicos" method="post" autocomplete="off" action="{% url 'presencas:registrar_presenca_dados_basicos_ajax' %}">
        {% csrf_token %}
        <div class="mb-3">
            <label for="id_curso" class="form-label">{% trans "Curso" %}</label>
            {{ form.curso }}
        </div>
        <div class="mb-3">
            <label for="id_turma" class="form-label">{% trans "Turma" %}</label>
            {{ form.turma }}
            <span id="loading-turmas" class="ms-2 text-primary d-none">{% trans "Carregando turmas..." %}</span>
        </div>
        <div class="mb-3">
            <label class="form-label">{% trans "Selecione o Ano/Mês" %}</label>
            <div id="calendario-mes-ano" class="d-flex align-items-center">
                <button type="button" id="btn-prev" class="btn btn-outline-secondary btn-sm me-2" aria-label="{% trans 'Retroceder mês' %}">&lt;</button>
                <span id="mes-ano-atual" style="min-width:120px; text-align:center;"></span>
                <button type="button" id="btn-next" class="btn btn-outline-secondary btn-sm ms-2" aria-label="{% trans 'Avançar mês' %}">&gt;</button>
                <span id="loading-calendario" class="ms-2 text-primary d-none">{% trans "Carregando calendário..." %}</span>
            </div>
            <input type="hidden" id="id_ano" name="ano" value="{{ form.initial.ano|default:ano_corrente }}">
            <input type="hidden" id="id_mes" name="mes" value="{{ form.initial.mes|default:mes_corrente }}">
        </div>
        <button type="submit" class="btn btn-primary">{% trans "Confirmar e Avançar" %}</button>
    </form>
    <div id="form-errors" class="alert alert-danger mt-3 d-none"></div>
    <!-- Bloco para exibir mensagens de erro do AJAX -->
    <div id="mensagem-erro-ajax" class="alert alert-danger d-none"></div>
    <div id="mensagem-sucesso-ajax" class="alert alert-success d-none"></div>
    <!-- Comentário: O bloco acima exibe erros de requisições AJAX, como falha ao carregar turmas ou calendário. -->
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/presencas/registrar_presenca_dados_basicos.js' %}"></script>
{% endblock %}