# Código da Funcionalidade: cursos
*Gerado automaticamente*



## cursos\admin.py

python
from django.contrib import admin
from .models import Curso

@admin.register(Curso)
class CursoAdmin(admin.ModelAdmin):
    list_display = ['codigo_curso', 'nome', 'duracao']
    search_fields = ('codigo_curso', 'nome')
    list_filter = ('duracao',)





## cursos\apps.py

python
from django.apps import AppConfig


class CursosConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'cursos'





## cursos\forms.py

python
from django import forms
from .models import Curso
from django.core.exceptions import ValidationError

class CursoForm(forms.ModelForm):
    class Meta:
        model = Curso
        fields = ['codigo_curso', 'nome', 'descricao', 'duracao']

    def clean_codigo_curso(self):
        codigo = self.cleaned_data.get('codigo_curso')
        if len(codigo) != 5:
            raise ValidationError("O código do curso deve ter exatamente 5 caracteres.")
        return codigo

    def clean_nome(self):
        nome = self.cleaned_data.get('nome')
        if len(nome) < 3:
            raise ValidationError("O nome do curso deve ter pelo menos 3 caracteres.")
        return nome




## cursos\models.py

python
from django.db import models

class Curso(models.Model):
    codigo_curso = models.CharField(max_length=5, unique=True)
    nome = models.CharField(max_length=100)
    descricao = models.TextField()
    duracao = models.PositiveIntegerField(verbose_name="Duração (meses)", null=True, blank=True)

    def __str__(self):
        return self.nome

    class Meta:
        verbose_name = "Curso"
        verbose_name_plural = "Cursos"





## cursos\tests.py

python
from django.test import TestCase

# Create your tests here.





## cursos\urls.py

python
from django.urls import path
from . import views

app_name = 'cursos'

urlpatterns = [
    path('', views.listar_cursos, name='listar_cursos'),
    path('novo/', views.criar_curso, name='criar_curso'),
    path('<int:id>/detalhes/', views.detalhar_curso, name='detalhar_curso'),
    path('<int:id>/editar/', views.editar_curso, name='editar_curso'),
    path('<int:id>/excluir/', views.excluir_curso, name='excluir_curso'),
]





## cursos\views.py

python
import importlib
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib import messages
from django.contrib.auth.decorators import login_required
from django.utils.translation import gettext as _

# Função para obter modelos usando importlib
def get_models():
    Curso = importlib.import_module('cursos.models').Curso
    return Curso

# Função para obter formulários usando importlib
def get_forms():
    CursoForm = importlib.import_module('cursos.forms').CursoForm
    return CursoForm

@login_required
def listar_cursos(request):
    """Lista todos os cursos."""
    Curso = get_models()
    cursos = Curso.objects.all()
    return render(request, 'cursos/listar_cursos.html', {'cursos': cursos})

@login_required
def criar_curso(request):
    """Cria um novo curso."""
    CursoForm = get_forms()
    
    if request.method == 'POST':
        form = CursoForm(request.POST)
        if form.is_valid():
            form.save()
            messages.success(request, _('Curso criado com sucesso!'))
            return redirect('cursos:listar_cursos')
        else:
            messages.error(request, _('Por favor, corrija os erros abaixo.'))
    else:
        form = CursoForm()
    
    return render(request, 'cursos/criar_curso.html', {'form': form})

@login_required
def detalhar_curso(request, id):
    """Exibe os detalhes de um curso."""
    curso = get_object_or_404(Curso, id=id)
    return render(request, 'cursos/detalhar_curso.html', {'curso': curso})

@login_required
def editar_curso(request, id):
    """Edita um curso existente."""
    Curso = get_models()
    CursoForm = get_forms()
    
    curso = get_object_or_404(Curso, id=id)
    
    if request.method == 'POST':
        form = CursoForm(request.POST, instance=curso)
        if form.is_valid():
            form.save()
            messages.success(request, _('Curso atualizado com sucesso!'))
            return redirect('cursos:detalhar_curso', id=curso.id)
        else:
            messages.error(request, _('Por favor, corrija os erros abaixo.'))
    else:
        form = CursoForm(instance=curso)
    
    return render(request, 'cursos/editar_curso.html', {
        'form': form, 
        'curso': curso
    })

@login_required
def excluir_curso(request, id):
    """Exclui um curso."""
    Curso = get_models()
    curso = get_object_or_404(Curso, id=id)
    
    if request.method == 'POST':
        curso.delete()
        messages.success(request, _('Curso excluído com sucesso!'))
        return redirect('cursos:listar_cursos')
    
    return render(request, 'cursos/excluir_curso.html', {'curso': curso})




## cursos\migrations\0001_initial.py

python
# Generated by Django 5.1.7 on 2025-03-25 23:45

from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Curso',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo_curso', models.CharField(max_length=5, unique=True)),
                ('nome', models.CharField(max_length=100)),
                ('descricao', models.TextField()),
                ('duracao', models.PositiveIntegerField(blank=True, null=True, verbose_name='Duração (meses)')),
            ],
            options={
                'verbose_name': 'Curso',
                'verbose_name_plural': 'Cursos',
            },
        ),
    ]





## cursos\templates\cursos\criar_curso.html

html
{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h1>Criar Novo Curso</h1>
    <form method="post">
        {% csrf_token %}
        {% include 'includes/form_errors.html' %}
        {% for field in form %}
            {% include 'includes/form_field.html' %}
        {% endfor %}
        <button type="submit" class="btn btn-primary">Criar Curso</button>
        <a href="{% url 'cursos:listar_cursos' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}




## cursos\templates\cursos\detalhar_curso.html

html
{% extends 'core/base.html' %}

{% block content %}
<div class="container mt-4">
  <h1>Detalhes do Curso</h1>
  
  <div class="card">
    <div class="card-header">
      <h2>{{ curso.nome }}</h2>
    </div>
    <div class="card-body">
      <p><strong>Código:</strong> {{ curso.codigo_curso }}</p>
      <p><strong>Descrição:</strong> {{ curso.descricao }}</p>
      <p><strong>Duração:</strong> {{ curso.duracao }} meses</p>
    </div>
    <div class="card-footer">
      <a href="{% url 'cursos:editar_curso' curso.id %}" class="btn btn-warning">Editar</a>
      <a href="{% url 'cursos:excluir_curso' curso.id %}" class="btn btn-danger">Excluir</a>
      <a href="{% url 'cursos:listar_cursos' %}" class="btn btn-secondary">Voltar</a>
    </div>
  </div>
</div>
{% endblock %}





## cursos\templates\cursos\editar_curso.html

html
{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h1>Editar Curso</h1>
    <form method="post">
        {% csrf_token %}
        {% include 'includes/form_errors.html' %}
        {% for field in form %}
            {% include 'includes/form_field.html' %}
        {% endfor %}
        <button type="submit" class="btn btn-primary">Atualizar Curso</button>
        <a href="{% url 'cursos:listar_cursos' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}




## cursos\templates\cursos\excluir_curso.html

html
{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h1>Excluir Curso</h1>
    <p>Tem certeza que deseja excluir o curso "{{ curso.nome }}"?</p>
    
    <form method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">Sim, excluir</button>
        <a href="{% url 'cursos:listar_cursos' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}





## cursos\templates\cursos\listar_cursos.html

html
{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  <h1>Cursos</h1>
  
  <a href="{% url 'cursos:criar_curso' %}" class="btn btn-primary mb-3">Novo Curso</a>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Código</th>
        <th>Nome</th>
        <th>Descrição</th>
        <th>Duração</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% for curso in cursos %}
      <tr>
        <td>{{ curso.codigo_curso }}</td>
        <td>{{ curso.nome }}</td>
        <td>{{ curso.descricao|truncatechars:50 }}</td>
        <td>{{ curso.duracao }} meses</td>
        <td>
          <a href="{% url 'cursos:detalhar_curso' curso.id %}" class="btn btn-sm btn-info">Detalhes</a>
          <a href="{% url 'cursos:editar_curso' curso.id %}" class="btn btn-sm btn-warning">Editar</a>
          <a href="{% url 'cursos:excluir_curso' curso.id %}" class="btn btn-sm btn-danger">Excluir</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5">Nenhum curso cadastrado.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}



